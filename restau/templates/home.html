{% load static %}
<html>
<head>
  <title>Home Dar Lwali</title>
  <link rel="icon" href="{% static 'images/ico.jpg' %}">
  <style>
  #loading-spinner {
            display: none; /* Masqué par défaut */
            width: 60px;
            height: 60px;
            border: 6px solid rgba(0, 0, 0, 0.1);
            border-top: 6px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Animation de rotation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Conteneur pour centrer le spinner */
        .spinner-container {
            display: none; /* Masqué par défaut */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8); /* Arrière-plan semi-transparent */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Centre vertical et horizontal */
            z-index: 9999; /* Toujours au-dessus des autres éléments */
        }

        /* Style pour le texte de chargement */
        .loading-text {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
            font-weight: bold;
        }
    .chat-form {
    display: flex;
    padding: 10px;
    border-top: 1px solid #ccc;
    background-color: #f9f9f9; /* Assure un fond clair pour le contraste */
}

.chat-form input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px 0 0 5px;
    box-sizing: border-box; /* Inclut padding et border dans la largeur totale */
}

.chat-form button {
    padding: 10px;
    border: 1px solid #ccc;
    border-left: none;
    border-radius: 0 5px 5px 0;
    background-color: #00ffa6;
    color: white;
    cursor: pointer;
    
}

         .chat-button {
          
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #ff6600;
    color: white;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 24px;
    cursor: pointer;
    z-index: 1000;
}

.chat-container {
    position: fixed;
    bottom: 80px; /* Ajustez si nécessaire */
    right: 20px;
    width: 300px;
    height: 600px;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: none; /* Caché par défaut */
    background: white;
    z-index: 1000;
    overflow: hidden;
}

.messages {
    height: 70%;
    overflow-y: auto;
    border-bottom: 1px solid #ccc;
    padding: 10px;
}

.user-message, .bot-response {
    margin-bottom: 10px;
}

.user-message {
    text-align: right;
}

.chat-form {
    display: flex;
    padding: 10px;
    border-top: 1px solid #ccc;
}

.chat-form input {
   
    flex: 1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px 0 0 5px;
}

.chat-form button {
    border: 1px solid #ccc;
    border-left: none;
    border-radius: 0 5px 5px 0;
    background-color: #ff6600;
    color: white;
    cursor: pointer;
    
}

.chat-buttons {
    display: flex;
    flex-wrap: wrap; /* Permet aux boutons de se placer sur plusieurs lignes si nécessaire */
    padding: 10px;
    border-bottom: 1px solid #ccc;
    background-color: #f9f9f9;
}

.chat-buttons button {
    margin: 5px;
    background-color: #ff6600;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
}

     body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        .gallery-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            background-color: #f5f5f5;
        }

        .gallery-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
            width: 100%;
        }

        .gallery-item {
            flex: 0 0 33.33%; /* Trois images visibles à la fois */
            box-sizing: border-box;
            padding: 10px;
        }

        .gallery-item img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px;
            object-fit: cover;
        }

        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            z-index: 100;
            font-size: 24px;
            border-radius: 50%;
        }

        .prev-button {
            left: 10px;
        }

        .next-button {
            right: 10px;
        }

        .title {
            text-align: center;
            margin: 20px 0;
            font-size: 2em;
            color: #111;
        }
.button {
  background-color: transparent; 
  border: none;
  color: white;
  padding: 16px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  transition-duration: 0.4s;
  cursor: pointer;
}

.button1 {
  
  background-color: transparent; 
  color: rgb(255, 255, 255); 
  border: 2px solid #dfdfdf;
}

.button1:hover {
  background-color: #ffffff;
  color: rgb(0, 0, 0);
}
    *{
  margin:0;
  padding:0;
  font-family:verdana;
}

nav{
  width: 100%;
  height: 100px;
  position: relative;
  line-height: 50px;
background-color: transparent;
}
nav ul{
  float: right;
  margin-right: 30px;
}
nav ul li{
  list-style-type: none;
  display: inline-block;
  transition: 0.5s all;
}
nav ul li:hover{
  background-color:rgb(255, 255, 255);

}
nav ul li a{
  text-decoration:none;
  color: #fff;
  padding: 30px;
}
nav ul li a:hover{
  text-decoration: none;
  color: #0c0b0b;
  padding: 30px;
  
}
* {
  box-sizing: border-box;
}

body {
  font-family: Arial;
  font-size: 17px;
}

.container {
  position: relative;
  max-width: 100%;
  margin: 0 auto;
}

.container img {vertical-align: middle;}

.container .content {
  position: absolute;
  bottom: 0;
  background: rgb(0, 0, 0); /* Fallback color */
  background: rgba(0, 0, 0, 0.5); /* Black background with 0.5 opacity */
  color: #f1f1f1;
  width: 100%;
  height: 100%;
  padding: 20px;
}

#footer {
  background: #292727;
  color: #fff;
  font-size: 14px;
  text-align: center;
  padding: 30px 0;
}

#footer h3 {
  font-size: 36px;
  font-weight: 700;
  color: #f0f0f0;
  position: relative;
  padding: 0;
  margin: 0 0 15px 0;
}

#footer p {
  font-size: 15;
  font-style: italic;
  padding: 0;
  margin: 0 0 40px 0;
}


.gg-phone {
   box-sizing: border-box;
   position: relative;
   display: block;
   width: 22px;
   height: 22px;
   transform: scale(var(--ggs,1))
}
.gg-phone::after,
.gg-phone::before {
   content: "";
   display: block;
   box-sizing: border-box;
   position: absolute
}
.gg-phone::after {
   width: 18px;
   height: 18px;
   border-top-left-radius: 1px;
   border-bottom-right-radius: 1px;
   border-bottom-left-radius: 12px;
   border-left: 4px solid;
   border-bottom: 4px solid;
   left: 2px;
   bottom: 2px;
   background:
      linear-gradient(
         to left,
         currentColor 10px,
         transparent 0
      ) no-repeat right 11px/6px 4px,
      linear-gradient(
         to left,
         currentColor 10px,
         transparent 0
      ) no-repeat -1px 0/4px 6px
}
.gg-phone::before {
   width: 20px;
   height: 20px;
   border: 6px double;
   border-top-color: transparent;
   border-bottom-color: transparent;
   border-left-color: transparent;
   border-radius: 50%;
   transform: rotate(-45deg);
   bottom: 2px;
   left: 2px
}
input[type=text], select ,textarea{
  width: 180px;
  padding: 12px 20px;
    margin: 8px 0;
    color: #070707;
   background-color: transparent;
  display: inline-block;
  border: 3px solid #080808;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=date], select {
  width: 150px;
  padding: 12px 20px;
    margin: 8px 0;
   background-color: transparent;
  display: inline-block;
  border: 3px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}
input[type=time], select {
  width: 150px;
  padding: 12px 20px;
    margin: 8px 0;
   background-color: transparent;
  display: inline-block;
  border: 3px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}
input[type=email], select {
  width: 360px;
  padding: 12px 20px;
    margin: 8px 0;
    color: #050505;
   background-color: transparent;
  display: inline-block;
  border: 3px solid #0e0c0c;
  border-radius: 4px;
  box-sizing: border-box;
}

  
  
  .button2 {
    background-color: rgb(7, 7, 7); 
    color: rgb(245, 239, 239); 
    border: 2px solid #0c0909;
    
  }
  
  .button2:hover {
    background-color: #0c0808;
    color: rgb(235, 225, 225);
    
  }
 


.row{
    position:relative;
    width: 100%;
    display: flex;
    justify-content: space-between;
   
}
.row .col50{
    position: relative;
    width: 50%;
    justify-content: center;
    align-items: center;
    
}

.row .col50 img{
    height: 300px;
    width: 600px;
    position: relative;
    
}
img {vertical-align: middle;}

hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid #ccc;
    margin: 1em 0;
    padding: 0;
}
.l{
  background-color: white; 
  border: none;
  color: rgb(10, 8, 8);
  padding: 16px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  transition-duration: 0.4s;
  cursor: pointer;
}

  #myBtn {
  display: none; 
  position: fixed; 
  bottom: 20px; 
  right: 30px; 
  z-index: 99; 
  border: none; 
  outline: none; 
  background-color: rgb(3, 3, 3); 
  color: rgb(248, 239, 239); 
  cursor: pointer; 
  padding: 15px; 
  border-radius: 10px; 
  font-size: 18px; 
}
#myBtn :hover{
  display: none; 
  position: fixed; 
  right: 30px; 
  z-index: 99; 
  border: none; 
  outline: none; 
  background-color: rgb(3, 3, 3); 
  color: rgb(238, 231, 231); 
  cursor: pointer; 
  padding: 15px; 
  border-radius: 10px; 
  font-size: 18px; 
}

.span1{
    border: 3px solid;
    height: 40px;
    width: 30px;
  }
</style>
</head>
<body>
  
<div class="container">
  <img src="{{ restaurant.bgphoto.url }}"  style="width:100% ;height: 95%;">
  <div class="content">
    <div>  <pre style="font-size: 20px;"><i class="gg-phone">     {{ restaurant.phone }}</i></pre></div>
    <hr/>
    
  <div id="abc">
            <nav><img src="{{ restaurant.logo.url }}" width="120px" height="130px"> 
                <ul>
                  
                    <li><a href="{% url 'home' %}">Home</a></li>
                    <li><a href="#b">Contact us</a></li>
                    <li><a href="#b1">galery</a></li>
                    <li><a href="https://www.bing.com/maps?&mepi=24~~TopOfPage~LargeMapLink&ty=18&q=Marrakech%2C%20Marrakech-Safi%2C%20Maroc&satid=id.sid%3Aaf4d7390-63b3-ee05-e4e3-66fb4c52f8ec&vdpid=5684466510114848775&ppois=31.625825881958008_-7.989161014556885_Marrakech%2C%20Marrakech-Safi%2C%20Maroc_~&cp=31.625826~-7.989161&v=2&sV=1&FORM=MIRE&qpvt=lien+maps+marakech" target="_blank">Localisation</a></li>
                    <li><a href="{% url 'reservation' %} "target="_blank">Reservation</a></li>
                   
                    
                </ul>
            </nav></div>
            <br><br><br><br>
            <center> <p style="font-size: 25px;">BIENVENUE AU</p><br>
                <h1 style="font-size: 40px;"> RESTAURANT {{ restaurant.name }}</h1><br>
        <p style="font-size: 20px;">excellente place pour la cuisine marocaine traditionnelle</p>
            <br><br><br>
            <a href="{% url 'menu' %}"><button class="button button1" title="voir menu"><h4>Voir Menu</h4></button></a>
            </center>
            <br><br><br>
        </div></div>
</div>
         
<br><br>
<section class="apropos" id="apropos">
  <div class="row">
      <div class="col50">
          <h1 style="color: #111; margin-left: 50px; font-size: 70px;">About Us</h1>
          <p style="color: #333030; margin: 35; margin-left: 50px; font-size: 20px; ">{{ restaurant.aboutus }}</p>
      </div>
<div> <img style="height: 400px; width: 600px; padding: 20px;" class="img" src="{% static 'images/R2.jpg' %}" alt=""></div>

          
  </div>
 
</section><br><br><br><center><h1 style="font-size: 70px;">Gallery</h1></center>
<br><br>
<div class="gallery-container">
  
  <button class="nav-button prev-button" onclick="moveSlide(-1)">&#10094;</button>
  <div class="gallery-wrapper">
      {% for image in restaurant.gallery.all %}
          <div class="gallery-item">
              <img src="{{ image.image.url }}" alt="{{ image.description }}">
          </div>
      {% endfor %}
  </div>
  <button class="nav-button next-button" onclick="moveSlide(1)">&#10095;</button>
</div>

<script>
  let index = 0;

  function moveSlide(step) {
      const galleryWrapper = document.querySelector('.gallery-wrapper');
      const slides = document.querySelectorAll('.gallery-item');
      const totalSlides = slides.length;
      const visibleSlides = 3; // Nombre d'images visibles à la fois
      const slideWidth = slides[0].clientWidth;

      index = (index + step + Math.ceil(totalSlides / visibleSlides)) % Math.ceil(totalSlides / visibleSlides);
      galleryWrapper.style.transform = `translateX(-${index * slideWidth}px)`;
  }
</script>
</div>



  <br><br><br><br>
  <section class="apropos" id="apropos">
    <div class="row">
        <div class="col50">
            <div class="img">
                <img style="height: 320px; width: 300px; margin: 30px; " src="{% static 'images/pastilapo.jpg' %}" alt="image">
                <img style="height: 320px; width: 300px;" src="https://www.cuisineactuelle.fr/imgre/fit/https.3A.2F.2Fi.2Epmdstatic.2Enet.2Fcac.2F2023.2F02.2F03.2F7beddd9b-3c5b-44b0-a1c6-1a9a17e21e66.2Ejpeg/1200x1200/quality/80/crop-from/center/30-idees-de-repas-a-deguster-apres-le-sport.jpeg" alt="image">
            </div>
        </div>
        <div style="margin-left: 130px;" class="col50">
            <h1 id="b" >--Contact Us--</h1><br>

<div>
  <form  method="POST" action="{% url 'home' %}">
    {% csrf_token %}
    
    <!-- Affichage des messages d'erreur -->
    {% if error_message %}
    <div style="color: red; margin-bottom: 10px;">
        {{ error_message }}
    </div>
    {% endif %}

    <!-- Champs du formulaire -->
    <input type="text" id="prenom" name="prenom" placeholder="Prénom" style="color: #000000;">
    <input type="text" id="nom" name="nom" placeholder="Nom" style="color: #131212;"><br>
    <input type="email" id="mail" name="mail" placeholder="Email" style="color: #0a0909;"><br>
    <textarea id="message" name="message" placeholder="Message" style="width: 360px;"></textarea><br>

    <button onclick="showLoading()" class="button button2"  type="submit"><strong>Envoyer</strong></button><br>
</form><div class="spinner-container" id="spinner-container">
  <div id="loading-spinner"></div>
  <div class="loading-text">Envoie de message...</div>
</div>    <script>
  // Fonction pour afficher le spinner
  function showLoading() {
      // Afficher l'indicateur de chargement
      document.getElementById('spinner-container').style.display = 'flex';

      // Simuler un délai pour illustrer l'action (par exemple 3 secondes)
      setTimeout(function() {
          // Masquer le spinner après 3 secondes
          document.getElementById('spinner-container').style.display = 'none';
      }, 3000);
  }

  // Assurer que le spinner est caché lors du chargement initial
  window.onload = function() {
      document.getElementById('spinner-container').style.display = 'none';
  };
</script>
<!-- Affichage du message de succès -->
{% if message %}
<div style="background-color: #D4EDDA; color: #155724; padding: 10px; margin-top: 20px; border-radius: 5px; text-align: center; max-width: 400px; margin: auto;">
    {{ message }}
</div>
{% endif %}

<!-- JavaScript pour empêcher le scroll vers le haut -->




</div>
    </div>
    </div>
</section>
<br><br><br><br>
<section class="apropos" id="apropos">
  <div class="row">
      <div class="col50">
          <h1 style="color: #111; margin-left: 220px; font-size: 40px;">--Localisation--</h1>
          <p style="color: #333030; margin: 15px; font-size: 20px; ">Restaurant Dar lwali est dans quartier zeitoun Rue mowahidine  Marrakech Médina</p>
          <p style="color: #333030; margin: 15px; font-size: 20px; ">Le restaurant Dar Moha est ouvert tous les jours de 12h  à 00h (minuit)</p><br>
     <a href="{{ restaurant.localisation }}" target="_blank"><button style="margin-left: 470px;" class="button button2"><strong>localisation</strong></button></a>
        </div>
        <img style="height: 270px; width: 300px;" src="{% static 'images/R2.jpg' %}" alt="image">
        <img style="height: 270px; width: 300px;" src="{% static 'images/raid.jpg' %}" alt="image">

          
  </div>
 
</section><br><br>
<button id="chat-toggle-button" class="chat-button">🗨️</button>
    
<div class="chat-container" id="chat-container">
    <div class="messages" id="messages"></div>
    <div class="chat-buttons">
        <button onclick="window.location.href='{% url 'menu' %}'" data-message="Je voudrais voir le menu.">Menu</button>
        <button onclick="window.location.href='{% url 'reservation' %}'" data-message="Je voudrais faire une réservation.">Réservation</button>
        <button data-message="Quels sont vos horaires ?">Horaires</button>
        <button data-message="Où se trouve le restaurant ?">Localisation</button>
        <button data-message="Que sommes-nous ?">Que sommes-nous ?</button>
    </div>
    <form id="chat-form" class="chat-form">
        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
        <input type="text" id="message-input" placeholder="Entrez votre message" required>
        <button type="submit">Envoyer</button>
    </form>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      const chatButton = document.getElementById('chat-toggle-button');
      const chatContainer = document.getElementById('chat-container');
      const chatForm = document.getElementById('chat-form');
      const messageInput = document.getElementById('message-input');
      const messages = document.getElementById('messages');
  
      // Fonction pour basculer l'affichage du chat
      chatButton.addEventListener('click', function() {
          chatContainer.style.display = chatContainer.style.display === 'none' || chatContainer.style.display === '' ? 'block' : 'none';
      });
  
      // Gestion de la soumission du formulaire de chat
      chatForm.addEventListener('submit', function(event) {
          event.preventDefault(); // Empêche le rechargement de la page
  
          const userMessage = messageInput.value.trim();
  
          if (userMessage) {
              // Ajouter le message de l'utilisateur aux messages
              messages.innerHTML += `<div class="user-message">${userMessage}</div>`;
              messageInput.value = '';
  
              // Envoyer le message au serveur
              fetch('{% url "chatbot" %}', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/x-www-form-urlencoded',
                      'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                  },
                  body: new URLSearchParams({
                      'message': userMessage
                  })
              })
              .then(response => response.json())
              .then(data => {
                  // Ajouter la réponse du bot aux messages
                  messages.innerHTML += `<div class="bot-response">${data.response}</div>`;
                  messages.scrollTop = messages.scrollHeight; // Faire défiler vers le bas
              });
          }
      });
  
      // Gestion des clics sur les boutons de chat
      document.querySelectorAll('.chat-buttons button').forEach(button => {
          button.addEventListener('click', function() {
              const message = this.getAttribute('data-message');
              if (message) {
                  // Ajouter le message de l'utilisateur aux messages
                  messages.innerHTML += `<div class="user-message">${message}</div>`;
  
                  // Envoyer le message au serveur
                  fetch('{% url "chatbot" %}', {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/x-www-form-urlencoded',
                          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                      },
                      body: new URLSearchParams({
                          'message': message
                      })
                  })
                  .then(response => response.json())
                  .then(data => {
                      // Ajouter la réponse du bot aux messages
                      messages.innerHTML += `<div class="bot-response">${data.response}</div>`;
                      messages.scrollTop = messages.scrollHeight; // Faire défiler vers le bas
                  });
              }
          });
      });
  });
  </script>

<footer id="footer">
  <div class="container">
    <h3 style="margin-right: 1000px;">RIAD LWALI</h3>
    <img style="margin-right: 1050px;"src="{{ restaurant.logo.url }}" width="120px" height="130px">
   

   <h1 style="margin-top: -180px; ">liens</h1><br><br>
   <a style="margin-top: -120px;  color: white;" href=" file:///C:/Users/NT-DATA/Desktop/restaurant/reservation.html">reservation</a><br><br>
   <a style="margin-top: -120px;  color: white;" href="C:\Users\HP\Desktop\restaurant\menu.html">menu</a><br><br>
   <a style="margin-top: -120px;  color: white;" href="https://www.bing.com/maps?&mepi=24~~TopOfPage~LargeMapLink&ty=18&q=Marrakech%2C%20Marrakech-Safi%2C%20Maroc&satid=id.sid%3Aaf4d7390-63b3-ee05-e4e3-66fb4c52f8ec&vdpid=5684466510114848775&ppois=31.625825881958008_-7.989161014556885_Marrakech%2C%20Marrakech-Safi%2C%20Maroc_~&cp=31.625826~-7.989161&v=2&sV=1&FORM=MIRE&qpvt=lien+maps+marakech " target="blank">localisation</a><br><br>
   <a style="margin-top: -120px; color: white;" href="#b1">galery</a><br><br><br><br>
   <h1 style="margin-top: -238px; margin-left: 700px;">contact</h1><br><br><br><br><br><br><br><br><br><br><br>
   
   <p style="margin-top: -150px; margin-left: 700px;">{{ restaurant.address }}</p><br>
   <pre style="font-size: 17px; margin-top: -45px; margin-left: 900px;"><i class="gg-phone">      {{ restaurant.phone }}</i></pre>
   <a style="font-size: 17px; margin-top: 20px; margin-left: 650px; color: white;" href="#b">contact</a>
<br><br><br><br><br>


    <div class="copyright">
      © Copyright Restaurant DAR LWALI 
    </div>
    </div>
  </div>
</footer>

</body>
</html>
